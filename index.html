<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" >
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>

    <!--Button to change page--->
    <div class="page-btn-container">
      <button type="button" id="page-btn1">1</button>
      <button type="button" id="page-btn2">2</button>
      <button type="button" id="page-btn3">3</button>
      <button type="button" id="page-btn4">4</button>
      <button type="button" id="page-btn5">note</button>
    </div>

    <!--Start form-->
    <form method="post" id="form">

    <!--- Header -->
    <p id="idNumber">No. <input type="number" name="Number"></p>
    <p id="HNNumber">HN <input type="number" name="HN"></p>
    <p id="FullName">Name <input type="text" name="FullName"></p>
    <h1>Long-Term Outcomes of Post-AKI Survivors</h1>
    <section id="section1">
      <table>
        <!--Part I-->
        <caption>Part I: Review History and Diagnosis</caption>
          <!--Row 1-->
        <tr>
          <td>Sex</td>
          <td colspan="3"><input type="radio" value="male" name="Sex">1. Male <input type="radio" value="female" name="Sex">2. Female</td>
        </tr>
          <!--Row 2-->
        <tr>
          <td><label for="age">Age (years old)</label></td>
          <td><input type="number" placeholder="..." id="age" name="Age" step="0.01"></td>
          <td>DOB</td>
          <td style="text-align:center"><input type="text" name="DOB"></td>
        </tr>
          <!--Row 3-->
        <tr>
          <td>Height (cm)</td>
          <td><input type="number" name="Height" placeholder="..." step="0.01"> </td>
          <td>Weight (kg)</td>
          <td><input type="number" name="Weight" placeholder="..." step="0.01"> </td>
        </tr>
          <!--Row 4-->
        <tr>
          <td>Hospital Admission</td>
          <td colspan="3" style="text-align:left"><input type="text" name="Hospital Admission"></td>
        </tr>
          <!--Row 5-->
        <tr>
          <td>Discharge date</td>
          <td colspan="3" style="text-align:left"><input type="text" name="Discharge date"></td>
        </tr>
          <!--Row 6 Admission diagnosis-->
        <tr>
          <td>Admission diagnosis</td>
          <td colspan="3"><input type="text" style="width: 100%; text-align:left" name="Admission diagnosis"></td>
        </tr>
          <!--Row 7-->
        <tr>
          <td rowspan="4">Cause of admission</td>
          <td colspan="3">
            <span><input type="radio" name="Cause of admission" value="Pulmonary">1. Pulmonary </span>
            <span><input type="radio" name="Cause of admission" value="Endocrine">2. Endocrine </span>
            <span><input type="radio" name="Cause of admission" value="Cardiovascular">3. Cardiovascular </span>
          </td>
        </tr> 
        <tr>
          <td colspan="3">
            <input type="radio" name="Cause of admission" value="Genitourinary">4. Genitourinary 
            <input type="radio" name="Cause of admission" value="Hematology">5. Hematology 
            <input type="radio" name="Cause of admission" value="Neurology">6. Neurology 
          </td>
        </tr>
        <tr>
          <td colspan="3">
            <input type="radio" name="Cause of admission" value="Skin/soft tissue infection">7. Skin/soft tissue infection 
            <input type="radio" name="Cause of admission" value="Surgery">8. Surgery 
            <input type="radio" name="Cause of admission" value="Systemic infection">9. Systemic infection
          </td>
        </tr>
        <tr>
          <td colspan="3">
            <input type="radio" name="Cause of admission" value="Gastrointestinal">10. Gastrointestinal 
            <input type="radio" name="Cause of admission" value="Ob/Gyne">11. Ob/Gyne 
            <input type="radio" name="Cause of admission" value="Other">12. Other 
          </td>
        </tr>
        <!--Row 8-->
        <tr>
          <td>ICU admission</td>
          <td colspan="3">
            <input type="radio" value="yes" name="ICU admission">1. Yes 
            <input type="radio" value="no" name="ICU admission">2. No
          </td>
        </tr>
        <!--Row 9-->
        <tr>
          <td>Primary ward</td>
          <td colspan="3">
            <input type="radio" value="Medical" name="Primary ward">1. Medical 
            <input type="radio" value="Surgical" name="Primary ward">2. Surgical
            <input type="radio" value="Other" name="Primary ward">3. Other
          </td>
        </tr>
        <!--Row 10  Comorbidity-->
        <tr>
          <td colspan="4">
            <strong>Comorbidity</strong>
          </td>
        </tr>
        <!--Row 11-->
        <tr>
          <td>DM type 2 </td>
          <td colspan="3">
            <input type="radio" value="yes" name="DM type 2">1. Yes 
            <input type="radio" value="no" name="DM type 2">2. No
          </td>
        </tr>

        <!--Row 12-->
        <tr>
          <td>Hypertension </td>
          <td colspan="3">
            <input type="radio" value="yes" name="Hypertension">1. Yes 
            <input type="radio" value="no" name="Hypertension">2. No
          </td>
        </tr>

        <!--Row 13-->
        <tr>
          <td>Dyslipidemia </td>
          <td colspan="3">
            <input type="radio" value="yes" name="Dyslipidemia">1. Yes 
            <input type="radio" value="no" name="Dyslipidemia">2. No
          </td>
        </tr>

        <!--Row 14-->
        <tr>
          <td>Chronic kidney disease </td>
          <td colspan="3">
            <input type="radio" value="yes" name="Chronic kidney disease">1. Yes 
            <input type="radio" value="no" name="Chronic kidney disease">2. No
          </td>
        </tr>

        <!--Row 15-->
        <tr>
          <td>Ischemic heart disease </td>
          <td colspan="3">
            <input type="radio" value="yes" name="Ischemic heart disease">1. Yes 
            <input type="radio" value="no" name="Ischemic heart disease">2. No
          </td>
        </tr>

        <!--Row 16-->
        <tr>
          <td>Heart failure </td>
          <td colspan="3">
            <input type="radio" value="yes" name="Heart failure">1. Yes 
            <input type="radio" value="no" name="Heart failure">2. No
          </td>
        </tr>

        <!--Row 17-->
        <tr>
          <td>Stroke </td>
          <td colspan="3">
            <input type="radio" value="yes" name="Stroke">1. Yes 
            <input type="radio" value="no" name="Stroke">2. No
          </td>
        </tr>

        <!--Row 18-->
        <tr>
          <td>Malignancy </td>
          <td colspan="3">
            <input type="radio" value="yes" name="Malignancy">1. Yes 
            <input type="radio" value="no" name="Malignancy">2. No
          </td>
        </tr>

        <!--Row 19-->
        <tr>
          <td>Other </td>
          <td colspan="3"><input type="text" style="width: 100%; text-align:left" placeholder="Please identify" name="Other"></td>
        </tr>

        <!--Row 20  Past history-->
        <tr>
          <td colspan="4">
            <strong>Past history</strong>
          </td>
        </tr>

        <!--Row 21-->
        <tr>
          <td>Smoking </td>
          <td colspan="3">
            <span>
              <input type="radio" value="yes" name="Smoking">1. Yes 
              <input type="radio" value="no" name="Smoking">2. No
            </span>
            <br>
            <span style="margin-left:2%">
              <input type="number" name="Packyear"> Packyear
            </span>
          </td>
        </tr>

        <!--Row 22-->
        <tr>
          <td>Alcohol </td>
          <td colspan="3">
            <input type="radio" value="yes" name="Alcohol">1. Yes 
            <input type="radio" value="no" name="Alcohol">2. No
          </td>
        </tr>

        <!--Row 23-->
        <tr>
          <td>Exercise </td>
          <td colspan="3">
            <input type="radio" value="yes" name="Exercise">1. Yes 
            <input type="radio" value="no" name="Exercise">2. No
          </td>
        </tr>

        <!--Row 24-->
        <tr>
          <td>Herbal </td>
          <td colspan="3">
            <input type="radio" value="yes" name="Herbal">1. Yes 
            <input type="radio" value="no" name="Herbal">2. No
          </td>
        </tr>

      </table>
    </section> <!---End section 1--->

    <section id="section2"> <!----------------- Section 2 ----------------->
      <table>
        <!--Part II-->
        <caption>Part II: Acute kidney injury</caption>

          <!--Row 1-->
        <tr>
          <td>Diagnosis of AKI</td>
          <td colspan="4">
            <input type="radio" value="Creatinine criteria" name="Diagnosis of AKI">1. Creatinine criteria 
            <input type="radio" value="Urine output criteria" name="Diagnosis of AKI">2. Urine output criteria
            <input type="radio" value="Both" name="Diagnosis of AKI">3. Both
        </tr>

          <!--Row 2-->
        <tr>
          <td>AKI staging</td>
          <td colspan="4">
            <input type="radio" value="Stage 1" name="AKI staging">Stage 1 
            <input type="radio" value="Stage 2" name="AKI staging">Stage 2
            <input type="radio" value="Stage 3" name="AKI staging">Stage 3
        </tr>

        <!--Row 3-->
        <tr>
          <td>Etiology of AKI</td>
          <td colspan="4">
            <input type="radio" value="Ischemic" name="Etiology of AKI">1. Ischemic 
            <input type="radio" value="Sepsis" name="Etiology of AKI">2. Sepsis
            <input type="radio" value="Cardiorenal" name="Etiology of AKI">3. Cardiorenal
            <input type="radio" value="Nephrotoxic/MALA" name="Etiology of AKI">4. Nephrotoxic/MALA
            <input type="radio" value="Obstructive uropathy" name="Etiology of AKI">5. Obstructive uropathy
            <input type="radio" value="Systemic disease/GN" name="Etiology of AKI">6. Systemic disease/GN
            <input type="radio" value="Multifactorial" name="Etiology of AKI">7. Multifactorial
            <input type="radio" value="Other" name="Etiology of AKI">8. Other
            <input type="text" name="Etiology-Other">

            <!----Other have same name as other in part I---->
        </tr>

        <!--Row 4-->
        <tr>
          <td>RRT</td>
          <td colspan="4">
            <input type="radio" value="yes" name="RRT">1. Yes 
            <input type="radio" value="no" name="RRT">0. No
            <hr>
            <p>First Mode of RRT</p>
            <input type="radio" value="HD" name="First Mode of RRT">1. HD
            <input type="radio" value="PD" name="First Mode of RRT">2. PD
            <input type="radio" value="CRRT" name="First Mode of RRT">3. CRRT
            <hr>
            <p>Indication for RRT</p>
            <input type="checkbox" value="yes" name="I/C RRT Acidosis">1. Acidosis
            <input type="checkbox" value="yes" name="I/C RRT Hyperkalemia">2. Hyperkalemia
            <input type="checkbox" value="yes" name="I/C RRT Intoxication">3. Intoxication
            <input type="checkbox" value="yes" name="I/C RRT Volume overload/control">4. Volume overload/control
            <input type="checkbox" value="yes" name="I/C RRT Uremia">5. Uremia
            <input type="checkbox" value="yes" name="I/C RRT Other">6. Other
            <input type="text" name="Indication-Other">

            <!----Other have same name as other in part I---->
        </tr>
        <tr class="smallfont">
          <td>Renal function</td>
          <td>Baseline</td>
          <td>Admission</td>
          <td>Maximum</td>
          <td>Discharge</td>
        </tr>
        <tr style="text-align:center">
          <td style="text-align:left">Creatinine
            (mg/dl)</td>
          <td><input type="number" step="0.01" name="Creatinine-Baseline"></td>
          <td><input type="number" step="0.01" name="Creatinine-Admission"></td>
          <td><input type="number" step="0.01" name="Creatinine-Maximum"></td>
          <td><input type="number" step="0.01" name="Creatinine-Discharge"></td>
        </tr>
        <tr style="text-align:center">
          <td style="text-align:left">GFR <span class="smallfont">(ml/min/1.73m2)</span></td>
          <td><input type="number" step="0.01" name="GFR-Baseline"></td>
          <td><input type="number" step="0.01" name="GFR-Admission"></td>
          <td><input type="number" step="0.01" name="GFR-Maximum"></td>
          <td><input type="number" step="0.01" name="GFR-Discharge"></td>
        </tr>
        <tr style="text-align:center">
          <td style="text-align:left">UACR</td>
          <td><input type="number" step="0.01" name="UACR-Baseline"></td>
          <td><input type="number" step="0.01" name="UACR-Admission"></td>
          <td><input type="number" step="0.01" name="UACR-Maximum"></td>
          <td><input type="number" step="0.01" name="UACR-Discharge"></td>
        </tr>
      </table>
    </section> 
    <!--------------End section 2--------------->


    <section id="section3" class="hidden">
      <table id="tableWildcard">
        <caption>
          Part III: Follow up
        </caption>
        <!-----------1st row------------>
        <tr style="text-align: center">
          <td></td>
          <td><span id="s3th1">1stvisit</span><br><input type="text" name="date-1stvisit"></td>
          <td><span id="s3th2">3mo</span><br><input type="text" name="date-3mo"></td>
          <td><span id="s3th3">6mo</span><br><input type="text" name="date-6mo"></td>
          <td><span id="s3th4">9mo</span><br><input type="text" name="date-9mo"></td>
          <td><span id="s3th5">12mo</span><br><input type="text" name="date-12mo"></td>
          <td><span id="s3th6">15mo</span><br><input type="text" name="date-15mo"></td>
          <td><span id="s3th7">18mo</span><br><input type="text" name="date-18mo"></td>
          <td><span id="s3th8">24mo</span><br><input type="text" name="date-24mo"></td>
          <td>
            <input id="s3th9" type="text" placeholder="()" style="margin: 0 auto" name="date-label-extra1"><br><input type="text" name="date-extra1">
          </td>
          <td>
            <input id="s3th10" type="text" placeholder="()" style="margin: 0 auto" name="date-label-extra2"><br><input type="text" name="date-extra2">
          </td>

        </tr>
        <!-------End of 1st row-------->
        <!--Auto add row (function createTable)--->
      </table>
    </section>
    <!--------------section 4------------>
    <section id="section4">
      <table id="section4-TB">
        <caption>Part IV: Outcomes at 1 year</caption>
        <tr>
          <td colspan="2">Follow-up</td>
          <td>
            <input type="radio" name="Follow-up" value="yes">1. Yes
            <input type="radio" name="Follow-up" value="no">0. No
          </td> 
        </tr>
        <tr>
          <td colspan="2">Who follow-up</td>
          <td>
            <input type="radio" name="Who follow-up" value="MDCT">1. MDCT
            <input type="radio" name="Who follow-up" value="Nephrologist">2. Nephrologist
            <input type="radio" name="Who follow-up" value="Intern/GP/Med">3. Intern/GP/Med
          </td> 
        </tr>

        <tr>
          <td colspan="2">Status</td>
          <td>
            <input type="radio" name="Status" value="Alive">1. Alive
            <input type="radio" name="Status" value="Death">0. Death<input type="text" name="Death-date" placeholder="Death date">
          </td> 
        </tr>
        
        <tr>
          <td colspan="2">Cause of death</td>
          <td>
            <input type="radio" name="Cause of death" value="Cardiovascular">1. Cardiovascular
            <input type="radio" name="Cause of death" value="Sepsis">2. Sepsis
            <input type="radio" name="Cause of death" value="Renal">3. Renal
            <input type="radio" name="Cause of death" value="Other">4. Other<input type="text" name="Cause of death">
          </td> 
        </tr>

        <tr>
          <td colspan="3">Renal outcomes</td>
        </tr>
        
        <script>
          const sec4TB = document.getElementById("section4-TB");
          //auto generate yes no question
          const autoGenerateYesNo = (headingText,headingName=headingText,includeDate=true) => {
            return `<tr>
                <td colspan="2">${headingText}</td>
                <td>
                  <input type="radio" name="${headingName}" value="yes">1. Yes
                  <input type="radio" name="${headingName}" value="no">0. No
                  <input type="text" name="${headingName}-date" placeholder="input date">
                </td> 
              </tr>`;
          }
          //auto generate header
          const autoGenerateHeader = (headingText) => {
            return `<tr>
                <td colspan="3">${headingText}</td> 
              </tr>`;
          }

          sec4TB.innerHTML += autoGenerateYesNo("Renal recovery");
          sec4TB.innerHTML += autoGenerateYesNo("Progression to CKD (changing staging in previous CKD)","Progression to CKD");
          sec4TB.innerHTML += autoGenerateYesNo("Denovo CKD (New CKD in no previous CKD)","Denovo CKD");
          sec4TB.innerHTML += autoGenerateYesNo("Progression of albuminuria(Change staging)","Progression of albuminuria");
          sec4TB.innerHTML += `<tr>
                <td colspan="2">Recurrent AKI</td>
                <td>
                  <input type="radio" name="Recurrent AKI" value="yes">1. Yes
                  <input type="radio" name="Recurrent AKI" value="no">0. No
                  <input type="text" name="Recurrent AKI-date" placeholder="input date">
                  <input type="text name="Recurrent AKI-cause" placeholder="Cause of AKI">
                </td> 
              </tr>`;
        sec4TB.innerHTML += autoGenerateYesNo("MAKE");
        sec4TB.innerHTML += `<tr>
                <td rowspan="3">MA KE</td>
                <td>KRT</td>
                <td>
                  <input type="radio" name="MAKE-KRT" value="yes">1. Yes
                  <input type="radio" name="MAKE-KRT" value="no">0. No
                  <input type="text" name="MAKE-KRT-date" placeholder="input date">
                </td> 
              </tr>
              <tr>
              <td>persistent kidney dysfunction</td>
                <td>
                  <input type="radio" name="MAKE-persistent kidney dysfunction" value="yes">1. Yes
                  <input type="radio" name="MAKE-persistent kidney dysfunction" value="no">0. No
                </td> 
              </tr>
              <tr>
              <td>Death</td> 
                <td>
                  <input type="radio" name="MAKE-Death" value="yes">1. Yes
                  <input type="radio" name="MAKE-Death" value="no">0. No
                  <input type="text" name="MAKE-Death-date" placeholder="input date">
                </td> 
              </tr>`;
              sec4TB.innerHTML += autoGenerateHeader("Cardiovascular outcomes");
              sec4TB.innerHTML += autoGenerateYesNo("Myocardial infarction");
              sec4TB.innerHTML += autoGenerateYesNo("Stroke");
              sec4TB.innerHTML += autoGenerateYesNo("ADHF");
              sec4TB.innerHTML += autoGenerateYesNo("AF");
              sec4TB.innerHTML += autoGenerateHeader("Other");
              sec4TB.innerHTML += `<tr>
                <td colspan="2">Readmission</td>
                <td>
                  <input type="radio" name="Readmission" value="yes">1. Yes
                  <input type="radio" name="Readmission" value="no">0. No
                  <input type="text" name="Readmission-date" placeholder="input date">
                  <input type="text name="Readmission-cause" placeholder="Cause of readmission">
                </td> 
              </tr>`;
              sec4TB.innerHTML += autoGenerateYesNo("New DM type 2");
              sec4TB.innerHTML += autoGenerateYesNo("New HT");
              sec4TB.innerHTML += autoGenerateYesNo("New DLP");
              sec4TB.innerHTML += `<tr>
                <td colspan="2">New Fracture</td>
                <td>
                  <input type="radio" name="New Fracture" value="yes">1. Yes
                  <input type="radio" name="New Fracture" value="no">0. No
                  <input type="text" name="New Fracture-date" placeholder="input date">
                  <input type="text name="New Fracture-location" placeholder="Location">
                </td> 
              </tr>`;
              sec4TB.innerHTML += `<tr>
                <td colspan="2">New Malignancy</td>
                <td>
                  <input type="radio" name="New Malignancy" value="yes">1. Yes
                  <input type="radio" name="New Malignancy" value="no">0. No
                  <input type="text" name="New Malignancy-date" placeholder="input date">
                  <input type="text name="New Malignancy-location" placeholder="Location">
                </td> 
              </tr>`;
              sec4TB.innerHTML += `<tr>
                <td colspan="2">Other</td>
                <td>
                  <input type="radio" name="Outcome-Other" value="yes">1. Yes
                  <input type="radio" name="Outcome-Other" value="no">0. No
                  <input type="text" name="Outcome-Other-cause" placeholder="Please define">
                  <input type="text name="Outcome-Other-date" placeholder="input date">
                </td> 
              </tr>`;
        </script>
      </table>
    </section>

    <!---Section 5--->

    <section id="section5" style="margin-top: 20px">
      <fieldset style="width:90%; margin: 0 auto">
      <legend><h3>Add reminder</h3></legend>
      <button type="button" id="Note-lossFU-btn" style="margin-bottom: 10px;">Loss F/U</button>
      
      <input type="text" style="width:50%; margin-left: 10px;" id="Note-lossFU-date"><br>

      <button type="button" id="Note-UACR-btn" style="margin-bottom: 10px;">UACR</button>
      <br>

      <button type="button" id="Note-PastHx-btn" style="margin-bottom: 10px;">Past history</button>
      
      <textarea cols="35" rows="10" name="Note" id="note" style="text-align:left; margin: 0 auto"></textarea>
      </fieldset>
    </section>

    <script>
        

      </script>

    <section> 
      <table id="genNameTB"></table>
    </section>
    <div class="button-container">
        <button type="submit" id="submit-button">Send</button>
    </div>
    </form>
    <div
      id="message"
      style="
        display: none;
        position: fixed;
        top: 10px;
        right: 10px;
        font-weight: bold;
        color: green;
        padding: 8px;
        background-color: beige;
        border-radius: 4px;
        border-color: aquamarine;
      "
    ></div>
  </body>
    
    <script>
      document.getElementById("form").addEventListener("submit", function (e) {
        e.preventDefault(); // Prevent the default form submission
        document.getElementById("message").textContent = "Submitting..";
        document.getElementById("message").style.display = "block";
        document.getElementById("submit-button").disabled = true;

        // Collect the form data
        var formData = new FormData(this);
        var keyValuePairs = [];
        for (var pair of formData.entries()) {
          keyValuePairs.push(pair[0] + "=" + pair[1]);
        }

        var formDataString = keyValuePairs.join("&");

        // Send a POST request to your Google Apps Script
        fetch(
          "https://script.google.com/macros/s/AKfycbyqOv7uEOaR6sYX49q4QYMGLoy1NrmiJIgc11lQM3uUWJyfkcxZef8nX-6SrpnxzTrwaA/exec",
          {
            redirect: "follow",
            method: "POST",
            body: formDataString,
            headers: {
              "Content-Type": "text/plain;charset=utf-8",
            },
          }
        )
          .then(function (response) {
            // Check if the request was successful
            if (response) {
              return response; // Assuming your script returns JSON response
            } else {
              throw new Error("Failed to submit the form.");
            }
          })
          .then(function (data) {
            // Display a success message
            document.getElementById("message").textContent =
              "Data submitted successfully!";
            document.getElementById("message").style.display = "block";
            document.getElementById("message").style.backgroundColor = "green";
            document.getElementById("message").style.color = "beige";
            document.getElementById("submit-button").disabled = false;
            document.getElementById("form").reset();

            setTimeout(function () {
              document.getElementById("message").textContent = "";
              document.getElementById("message").style.display = "none";
            }, 2600);
          })
          .catch(function (error) {
            // Handle errors, you can display an error message here
            console.error(error);
            document.getElementById("message").textContent =
              "An error occurred while submitting the form.";
            document.getElementById("message").style.display = "block";
          });
      });

      //script to control section
      let sectionN = 5;
      const sec = [];
      const btn = [];
      
      for(let i=0;i<sectionN;i++){
        sec.push(document.getElementById(`section${i+1}`));
        btn.push(document.getElementById(`page-btn${i+1}`));
        btn[i].addEventListener('click',()=>{
          for(let j = 0; j< sec.length;j++) //hide every other section
          {
            if(sec[j].classList.contains("hidden") == false){
              sec[j].classList.add("hidden");
            }
          }
          sec[i].classList.remove("hidden"); //show the section that btn pressed
        });
      }


    //set default date
    const dateInputArr = document.querySelectorAll('input[type="date"]')
    for(let i =0;i<dateInputArr.length;i++){
      dateInputArr[i].defaultValue = "1980-06-15";
    }

    //auto create new row
    const TBwildcard = document.getElementById("tableWildcard");
    const createTable = (TBhead,TBstep="0.01") => {
        return `<tr>
          <td id=${TBhead}>${TBhead}</td>
          <td><input type="number" name="${TBhead}-1stvisit" step=${TBstep} id="${TBhead}-1stvisit" step=${TBstep}></td>
          <td><input type="number" name="${TBhead}-3mo" step=${TBstep} id="${TBhead}-3mo"></td>
          <td><input type="number" name="${TBhead}-6mo" step=${TBstep} id="${TBhead}-6mo"></td>
          <td><input type="number" name="${TBhead}-9mo" step=${TBstep} id="${TBhead}-9mo"></td>
          <td><input type="number" name="${TBhead}-12mo" step=${TBstep} id="${TBhead}-12mo"></td>
          <td><input type="number" name="${TBhead}-15mo" step=${TBstep} id="${TBhead}-15mo"></td>
          <td><input type="number" name="${TBhead}-18mo" step=${TBstep} id="${TBhead}-18mo"></td>
          <td><input type="number" name="${TBhead}-24mo" step=${TBstep} id="${TBhead}-24mo"></td>
          <td><input type="number" name="${TBhead}-extra1" step=${TBstep} id="${TBhead}-extra1"></td>
          <td><input type="number" name="${TBhead}-extra2" step=${TBstep} id="${TBhead}-extra2"></td>
        </tr>`;
    }

    //create row for section 3
    TBwildcard.innerHTML += createTable("BW");
    document.getElementById("BW").innerText+=" (kg)";
    TBwildcard.innerHTML += createTable("SBP");
    document.getElementById("SBP").innerText+=" (mmHg)";
    TBwildcard.innerHTML += createTable("DBP");
    document.getElementById("DBP").innerText+=" (mmHg)";
    TBwildcard.innerHTML += createTable("MAP");
    document.getElementById("MAP").innerText+=" (mmHg)";
    document.getElementById("MAP").innerHTML+="<button type='button' id='MAP-btn'>MAP</button>";
    TBwildcard.innerHTML += createTable("BUN");
    TBwildcard.innerHTML += createTable("Cr","0.01");
    TBwildcard.innerHTML += createTable("eGFR");
    TBwildcard.innerHTML += createTable("Na");
    TBwildcard.innerHTML += createTable("K");
    TBwildcard.innerHTML += createTable("Cl");
    TBwildcard.innerHTML += createTable("HCO3");
    TBwildcard.innerHTML += createTable("Ca");
    TBwildcard.innerHTML += createTable("PO4");
    TBwildcard.innerHTML += createTable("Hb");
    TBwildcard.innerHTML += createTable("Hct");
    TBwildcard.innerHTML += createTable("FBG");
    TBwildcard.innerHTML += createTable("HbA1c");
    TBwildcard.innerHTML += createTable("Cho");
    TBwildcard.innerHTML += createTable("LDL");
    TBwildcard.innerHTML += createTable("Alb");
    TBwildcard.innerHTML += createTable("Vit D");
    TBwildcard.innerHTML += createTable("iPTH");
    TBwildcard.innerHTML += createTable("Iron");
    TBwildcard.innerHTML += createTable("TIBC");
    TBwildcard.innerHTML += createTable("Ferritin");
    TBwildcard.innerHTML += createTable("UACR");
    TBwildcard.innerHTML += createTable("24-h urine Na");
    TBwildcard.innerHTML += createTable("Prot intake");

    //Auto set MAP
    const autoSetMAP = (n) => {
      for(let i=0;i<n;i++){
        let sbp = 0;
        let dbp = 0;
        let map;
        let thtext = "";
        let fixHeader = 8; // 8 come from amount of fixed header (1stvisit to 24mo)
        if(i<fixHeader){ 
          thtext = document.getElementById(`s3th${i+1}`).textContent;
          sbp = document.getElementById(`SBP-${thtext}`)?.value?document.getElementById(`SBP-${thtext}`)?.value:0;
        dbp = document.getElementById(`DBP-${thtext}`)?.value?document.getElementById(`DBP-${thtext}`)?.value:0;
        map = document.getElementById(`MAP-${thtext}`);
        }else{
          sbp = document.getElementById(`SBP-extra${i-fixHeader+1}`)?.value?document.getElementById(`SBP-extra${i-fixHeader+1}`)?.value:0;
        dbp = document.getElementById(`SBP-extra${i-fixHeader+1}`)?.value?document.getElementById(`SBP-extra${i-fixHeader+1}`)?.value:0;
        map = document.getElementById(`MAP-extra${i-fixHeader+1}`);
        //call extra1, extra2 element
        }

        if(map){
          map.value=Math.floor((parseInt(sbp)+(parseInt(dbp)*2))/3);
        }
      }
    }
    document.getElementById("MAP-btn").addEventListener('click',()=>{autoSetMAP(10)});



    //get all input name
    const inputArr = document.querySelectorAll("input");
    const nameArr = [];

          //check duplicate input name
    let duplicate = false;
    for(const i of inputArr){
      duplicate = false;
      for(const j of nameArr){
        if(i.name===j){
          duplicate = true;
          break;
        }
      }
      if(!duplicate){
        nameArr.push(i.name);
      }
    }
    //console.log(nameArr);
    const genName = document.getElementById("genNameTB");
    const genNameTable = (name) => {
        return `<td>${name}</td>`;
    }
    let nameString = "";

    for(const i of nameArr){
      nameString += genNameTable(i);
    }
    //console.log(nameString);
    genName.innerHTML += "<tr>"+nameString+"</tr>";
    genName.classList.add("hidden");

    //add Button for quicker input

        const noteTextarea = document.getElementById("note");
        const addTextToNote = (textNote) => {
            noteTextarea.value += textNote;
        }

        //add text loss F/U
        document.getElementById("Note-lossFU-btn").addEventListener('click',()=>{addTextToNote("loss F/U "+document.getElementById("Note-lossFU-date")?.value+"\n")})

        //add text UACR
        document.getElementById("Note-UACR-btn").addEventListener('click',()=>{addTextToNote("UACR\n")})

        //add text Past history
        document.getElementById("Note-PastHx-btn").addEventListener('click',()=>{addTextToNote("Past history\n")})

    </script>
</html>
